# Домашнее задание к занятию "Базы данных, их типы" - Сенотов А.С.


### Задание 1 СУБД

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.
Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.
1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.
1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.
1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.
1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

---
### Ответ
1.1 Для решения бюджетирования и составления аналитических отчётов подойдёт реляционная модель базы данных. СУБД для базы можно использовать 1С в режиме клиент-сервер. Данная СУБД адаптирована под законодательство РФ, имеет готовые формы отчетов. Может работать с другими СУБД, например, MSSQL и PostgreSQL.
1.1* Для ускорения работы СУБД можно использовать REST api.

1.2 Лендинг и CRM системы, например Битрикс, используют модели реляционных баз данных.
1.2* На данном этапе пока ещё можно обойтись одной СУБД. Вышеупомянутая система Битрикс также использует СУБД 1С.

1.3 Учитывая тот факт, что нормативная документация может включать в себя различные типы данных, как текстовые, так графические и полиграфические типы, для создания базы данных рекомендуется не реляционная модель NoSQL, например MongoDB.
1.3* Для решения этой задачи можно использовать существующую базу, но тогда придётся приводить всю документацию к одному из типов данных, например, хранить всё в текстовом формате. Также понадобится введение дополнительных полей с отсылками на документацию.

1.4 Реляционная модель базы данных, реализация через 1С, СУБД может быть PostgreSQL.
1.4* Отдел закупок работает в связке с логистикой, поэтому целесообразно подключить их к этой базе данных с разграничением прав.

1.5* Вышеперечисленные задачи можно решить с помощью одной СУБД, например PostgreSQL. При этом потребуется большой объем работ при формировании базы нормативной документации и правил.

### Задание 2 Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.
2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Приведите ответ в свободной форме.

---
### Ответ
#### 2.1
1. Авторизация в личном кабинете пользователя оператора сотовой связи (подтверждение личности)
2. Запрос к сервисам банка на указанную сумму (доступность сервисов)
3. Запрос сервисов банка к счету пользователя на наличие необходимой суммы (наличие счёта и денег)
4. Запрос подтверждения кода (проверка, что именно этот пользователь запрашивает деньги)
5. Перевод запрашиваемой суммы со счёта клиента банка на счет мобильного оператора
6. Подтверждение оператором транзакции.
#### 2.1*
Алгоритм действия схож с оплатой клиентом, но делается по расписанию составленному либо оператором мобильной связи, когда запрос формируется на стороне его сервисов, либо по расписанию составленному в сервисах банка. 
При этом, оператор запрашивает наличие необходимой суммы. Если запрос со стороны банковских сервисов, то запрашивается существование клиента с указанным номером телефона.

### Задание 3 SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.
3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.

---
### Ответ
#### 3.1
1. Независимость от конкретной СУБД
2. Наличие стандартов, строгая типизация данных
3. Декларативность. После формирования запроса "СУБД решает" как это сделать
4. Поддержка ACID
5. Более высокий уровень безопасности

#### 3.1* 
NewSQL - это класс систем управления реляционными БД, представляет собой слияние преимуществ SQL с инновациями
NewSQL предлагает решения, которые могут масштабироваться горизонтально, распределяя нагрузку по нескольким узлам
NewSQL поддерживают ACID, как наследие от SQL
NewSQL объединяет подходы NoSQL и SQL

### Задание 4 Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.
На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

#### Ответ
Критерий выбора СУБД для распределённых вычислений зависит от модели:
* Клиент-сервер. В данной архитектуре клиенты запрашивают услуги или ресурсы у центрального сервера, который отвечает за предоставление услуг и управление ресурсами. 
* Кластерные вычисления. В данной архитектуре несколько компьютеров соединяются вместе, образуя единую систему. Каждый компьютер в кластере отвечает за часть задач по обработке или хранению данных.
* Облачные распределенные вычисления.

Исходя из модели распределённых вычислений необходимо определить тип хранимых данных, и определить какое количество запросов будет к базе данных в единицу времени. Определить насколько критична потеря части данных.
На приведённой ниже диаграмме Вена классифицированы СУБД по применению, надёжности, модели и лицензии.

![СУБД](img/1.1.png)
источник "https://habr.com/ru/articles/775574/"

Согласно диаграмме, для распределённых вычислений подходят СУБД из группы Big Data, а именно MongoDB, QuestDB, GridDB. Если требуется сочетание всех четырёх факторов, то PostgreSQL, Greenplum, Druid.
